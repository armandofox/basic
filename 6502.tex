
\section{VALLEY FORGE, 1975 - THE 6502}

\smallpicfigure{figs/6502.jpg}{fig:6502}{Chip manufacturing costs in the
  1970s were dominated by the size of the die, which influenced both
  yield and packaging costs.  The 6502 was targeted to fit in an
  inexpensive 40-pin ceramic package.}

Chuck Peddle had been working at General Electric when BASIC was
born at Dartmouth.  He had since moved on to chip maker Motorola, whose 6800
microcontroller chip competed with the Intel 4004 and
8008 microprocessors.  The 6800 sold reasonably well at \$300, but
Peddle  believed that with a streamlined design they could
produce a competitive product that could sell for just \$25,
allowing Motorola to ``put
microprocessors everywhere''~\cite[p. 31]{commodore}---microwave ovens,
cars, children's toys---thereby creating whole new categories of Motorola customers.

But Motorola was skeptical and uninterested, so Peddle and a few of
his close colleagues left to join MOS~Technology\footnote{MOS stands
for metal oxide semiconductor, a phrase that describes the
breakthrough technology that made inexpensive integrated circuits
possible.}, a relatively low-profile company whose main business was
licensing designs from companies such as Texas Instruments and then
manufacturing the chips inexpensively.
In 1975, one of their mainstays was a chip containing all the logic
needed to play the hugely successful Atari Pong arcade game (``table
tennis''), which they sold to manufacturers of low-priced home video
game consoles.
Through Peddle's years of experience using the 6800 in ``real world''
applications and his skill as a chip designer, he eliminated
rarely-used features and streamlined the design to just 4300
transistors, resulting in the smaller and cheaper-to-manufacture chip
he had envisioned.
Figure~\ref{fig:6502} shows an early production model of the \w{MOS
  Technology 6502}.
%% \footnote{The 6501 was a cheaper but
%% software-compatible chip designed to be an upsell vehicle for the
%% 6502, but it was withdrawn after Motorola successfully sued MOS
%% for making the 6501 pin-compatible with the Motorola 6800.}.

\begin{tangent}
    Unlike the 6800, the 6502 lacks
    tristate drivers for the address bus, so it can't do DMA.  This
    omission was seen as a reasonable compromise
    for small systems~\cite{byte75:6502}, but would become
    problematic a few years later when hard drives became affordable, as
    it made it awkward to connect high-speed peripherals to 6502-based systems.
    The 6502 also lacked the 6800's 16-bit index register, but in exchange
    it provided two
     8-bit index registers, so that code that references arrays using
     random offsets or maintains pointers into two arrays at once would
     require about half the instruction count and execution time as on
     the 6800.
    %% Since RAM could be accessed in one
    %% clock cycle (the 6502 ran at
    %% 1~MHz) , RAM was used as overflow registers instead of devoting valuable die
    %% space to registers.  The ``zero
    %% page'' (bytes 0x0000 to 0x00ff in the 6502's 16-bit address space) had
    %% special load and store instructions that were one byte shorter to fetch and
    %% decode, since the high-order address byte was zero.
    The 6502 was also the first pipelined
    microprocessor, giving it a higher instructions-per-clock 
    rate than comparable processors and speeding up
    common instructions such as short-distance branches
     and subroutine calls.

    Later, the derivative 6507 would
    remove some other features and limit
    physical memory to a 14-bit address space.  These changes allowed
    the 6507 to
    use a smaller and cheaper 28-pin 
    plastic package and to be sold for \$5,
    making it the chip that was chosen for the Atari 2600 game console.
\end{tangent}

The 6502's simple design was created and tested essentially by hand,
since the young company could not afford the
fancy automation used by their competitors.
Peddle's colleague John Paivinen, an expert in the chemical
and physical manufacturing processes used to produce the chips, had
%% invented a technology\footnote{Contactless mask liners.} that allowed
%% the ``master'' from which chips are ``stamped'' to last indefinitely,
%% rather than wearing out gradually as more chips are produced.
figured out a way to fix defects in integrated-circuit masks even after the masks were
manufactured, something no other chip manufacturer had been able to do.
Because of this innovation, and through careful tuning of the manufacturing process,
MOS Technology's yields (percentage of chips coming off the assembly
line that worked well enough to sell) approached 70\%,
compared to around 30\% for competitors~\cite{commodore}.
The result was that MOS Technology could manufacture the 6502 for \$12
and sell it for \$25 in  quantities of one, as
Figure~\ref{fig:price_performance} shows.

\begin{figure}
  \input{figs/price_performance.tex}
  \caption{\label{fig:price_performance} 
    The first crop of microprocessors was steadily creeping up on the
    performance of minicomputers; for reference, the IBM System/370,
    which started at \$475,000 for a complete system, ran 0.640~MIPS at
    2.5MHz. 
    The 6502 beat almost all competing microprocessors on the AH~Systems benchmarks of
    the day~\cite{edn75:6502}, as well as in absolute price and price/performance.
    Intel and Motorola offered steep (up to 80\%) wholesale discounts,
    but you might have to order hundreds of units to
    get that price, placing them beyond the reach of hobbyists~\cite[p. 228]{ceruzzi}.}
\end{figure}


%% In 1974, HP introduced the HP-65 programmable calculator, Intel
%% announced the 8080, and (in December) \emph{Popular Electronics} had the
%% Altair 8800 on the cover.  

\smallpicfigure{figs/pet2001.jpg}{fig:pet}{%
Reflecting Commodore chairman Jack Tramiel's frugal streak,
the Commodore PET's original keyboard was made from calculator-keyboard
parts, and the metal frame was stamped by another Commodore-held company
that made cheap office furniture.  The revised PET had a real full-size
typewriter keyboard.}

Around that time, Commodore Business Machines took an interest in MOS
Technology.
Jack Tramiel, Commodore's ruthless chairman and a Holocaust survivor,
was obsessed with achieving low prices for consumer products through
vertical integration.
Commodore originally bought MOS Technology in order to have a
guaranteed in-house source for manufacturing chips for its
calculators~\cite{commodore}.
But Texas Instruments, which designed those chips and licensed
manufacturing rights to companies such as MOS~Technology, had just
decided to enter the consumer calculator business, in effect competing
with its own customers.
Peddle saw a chance to move Commodore into a new market: he convinced
Tramiel that the generaly public was ready for an inexpensive computer based on
the 6502.
With his MOS Technology team and a few superstar new hires, Peddle led
the design of the Commodore PET (Figure~\ref{fig:pet}), the first
ready-to-run personal computer offered for sale to consumers.


Peddle knew that since people would have to create their own software,
a personal computer would have a competitive advantage if it came with
a programming language.
Peddle had discovered BASIC while working at GE during that company's
relationship with Dartmouth, and had used BASIC literally the day
after it was invented.
He thought it would be an ideal language for the kind of hobbyists
who would buy the PET computer, and he knew that Micro-Soft had
created a version of BASIC for the 8080.
Peddle convinced Tramiel to approach Micro-Soft with an offer: for a
flat fee of \$25,000 (about \$100,000 in 2018), Micro-Soft would
create a version of their BASIC that worked on the 6502
microprocessor, and would grant Commodore a license to package a copy
of that BASIC with every computer they sold.
Gates had initially disdained the 6502 as underpowered compared to the
8080, and \$25,000 seemed far too low.
But Micro-Soft was struggling to sell enough copies of BASIC for the
Altair 8800, so Gates seized the opportunity to acquire a new
customer.

But how would BASIC be distributed with the PET?
Floppy disk drives were far too expensive for PC buyers, portable
hard disks weren't even on the horizon, and cassette tapes were too
slow and unreliable for distributing a program the size of a BASIC
interpreter.
On the other hand, MOS Technology could produce low-cost (though
low-capacity) ROM chips, which could hold copious (by the standards of
the time) amounts of non-modifiable data or code (hence ROM for
``read-only memory'').
So Peddle decided to put the computer language interpreter in ROM,
establishing a precedent that nearly all first-generation PCs would
follow.

%% had committed to port BASIC to other 8080-based devices such as smart
%% terminals from NCR and Data Terminal Corporation~\cite[p. 96]{gates} and
%% even the Motorola 6800.

Gates thought the 6502 didn't have much of a future because it was
significantly less powerful than the 8080, but he was wrong.
Although the 6502's low price eventually forced Intel and Motorola to
slash their own prices, by then a generation of hobbyists had started
using the affordable 6502 to build their own computers.
While Commodore was developing the PET, a positive review of the 6502
in the influential hobbyist magazine \emph{Byte}~\cite{byte75:6502}
caught the attention of electronics whiz Steve Wozniak, who waited in
line to buy a 6502 at the Wescon trade show where it was introduced.
The shy Woz had been attending meetings of the Homebrew Computer Club
in Palo Alto and was hoping to design a computer he could demonstrate
there; that computer would eventually be called the Apple~I and would
launch another legendary company.

By the mid 1980s, the 6502 or one of its derivatives powered the
Apple~II, BBC Micro, Commodore VIC-20, Commodore 64, and Atari 400 and
800 computers, as well as the Atari 2600 and Nintendo NES game
consoles, plus many lesser-known computers and game consoles---an
ironic success for a chip originally designed to power cash registers
and microwave ovens.
The PC revolution had suddenly begun\ldots{}and Microsoft was just in
time to catch the wave.


